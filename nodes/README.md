# Controlling turtlesim with 3D hand tracking
![turtle-demo.gif](../turtle-demo.gif)

These nodes allow you to control a ROS robots such as [turtlesim](http://wiki.ros.org/turtlesim) using the output from the Seeed mgc3030 ROS driver. This folder contains the following files:
- `tracker_controller_basic.py`: Basic template for reading from the ROS driver and triggering commands.
- `tracker_controller_vel.py`: Further fleshes out the above to publish `cmd_vel` Twist messages, the standard topic for controlling robots in ROS.
- `tracker_controller_turtle.py`: Tuned to control the turtlesim.

## Controls
Currently we are using swipe gestures ("Up", "Down", "Left", "Right") in order to determine the motion direction of the robot. Then, a pressing motion ( using the depth reading of the 3D position readings ) determines the amount of motion, similar to a gass pedal. 

In order to change the motion direction of the robot, wait 2 seconds without triggering the sensor. I.E, if you swiped forward (To make the robot drive), and you now wish to rotate, wait two seconds first, then swipe sideways. This was implemented to prevent accidentally switching of motion directions.

These scripts **do not** take advantage of the touch events generated by the ROS driver. In theory we can use the "Top, Left, Right, Bottom, Center" readings in order to achieve more flexible commands. This can be implemented in the unimplemented callback for touch events, in the code.

## Setup
On the Pi / external computer ( remember to point ROS_MASTER_URI to the Pi and source the appropriate ROS distribution and workspaces )
```
sudo apt install ros-melodic-turtlesim

python tracker_controller_turtle.py # Or use rosrun
rosrun turtlesim turtlesim_node
```

## Parameters

The following parameters are used:
- `gesture_topic_name`: The topic for the gestures published by the ROS driver. Defaults to `mgc3030/gesture`
- `touch_topic_name`: The topic for the touch events published by the ROS driver. Defaults to `mgc3030/touch`
- `pos_topic_name`: The topic for the pos events published by the ROS driver. Defaults to `mgc3030/pos`
- `sensor_max_dist`: The maximum value for the sensor readings. Defaults to `0.1`
- `update_rate`: The rate of publishing / printing updates. Defaults to `10.0`
- `vel_topic`: The topic for `cmd_vel` topic. Defaults to `cmd_vel`, except `tracker_controller_turtle.py` which is `turtle1/cmd_vel`
- `max_vel`: The maximum velocity allowed for the vehicle. Defaults to `2.0`
- `max_angular_vel`: The maximum angular velocity, in radians, allowed for the vehicle. Defaults to `1.0`
